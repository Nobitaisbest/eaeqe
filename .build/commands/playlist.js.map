{
  "version": 3,
  "sources": ["../../commands/playlist.ts"],
  "sourcesContent": ["import { DiscordGatewayAdapterCreator, joinVoiceChannel } from \"@discordjs/voice\";\nimport {\n  ChatInputCommandInteraction,\n  EmbedBuilder,\n  PermissionsBitField,\n  SlashCommandBuilder,\n  TextChannel\n} from \"discord.js\";\nimport { bot } from \"../index\";\nimport { MusicQueue } from \"../structs/MusicQueue\";\nimport { Playlist } from \"../structs/Playlist\";\nimport { Song } from \"../structs/Song\";\nimport { i18n } from \"../utils/i18n\";\n\nexport default {\n  data: new SlashCommandBuilder()\n    .setName(\"playlist\")\n    .setDescription(i18n.__(\"playlist.description\"))\n    .addStringOption((option) => option.setName(\"playlist\").setDescription(\"Playlist name or link\").setRequired(true)),\n  cooldown: 5,\n  permissions: [\n    PermissionsBitField.Flags.Connect,\n    PermissionsBitField.Flags.Speak,\n    PermissionsBitField.Flags.AddReactions,\n    PermissionsBitField.Flags.ManageMessages\n  ],\n  async execute(interaction: ChatInputCommandInteraction) {\n    let argSongName = interaction.options.getString(\"playlist\");\n\n    const guildMemer = interaction.guild!.members.cache.get(interaction.user.id);\n    const { channel } = guildMemer!.voice;\n\n    const queue = bot.queues.get(interaction.guild!.id);\n\n    if (!channel)\n      return interaction.reply({ content: i18n.__(\"playlist.errorNotChannel\"), ephemeral: true }).catch(console.error);\n\n    if (queue && channel.id !== queue.connection.joinConfig.channelId)\n      if (interaction.replied)\n        return interaction\n          .editReply({ content: i18n.__mf(\"play.errorNotInSameChannel\", { user: interaction.client.user!.username }) })\n          .catch(console.error);\n      else\n        return interaction\n          .reply({\n            content: i18n.__mf(\"play.errorNotInSameChannel\", { user: interaction.client.user!.username }),\n            ephemeral: true\n          })\n          .catch(console.error);\n\n    let playlist;\n\n    try {\n      playlist = await Playlist.from(argSongName!.split(\" \")[0], argSongName!);\n    } catch (error) {\n      console.error(error);\n\n      if (interaction.replied)\n        return interaction.editReply({ content: i18n.__(\"playlist.errorNotFoundPlaylist\") }).catch(console.error);\n      else\n        return interaction\n          .reply({ content: i18n.__(\"playlist.errorNotFoundPlaylist\"), ephemeral: true })\n          .catch(console.error);\n    }\n\n    if (queue) {\n      queue.songs.push(...playlist.videos);\n    } else {\n      const newQueue = new MusicQueue({\n        interaction,\n        textChannel: interaction.channel! as TextChannel,\n        connection: joinVoiceChannel({\n          channelId: channel.id,\n          guildId: channel.guild.id,\n          adapterCreator: channel.guild.voiceAdapterCreator as DiscordGatewayAdapterCreator\n        })\n      });\n\n      bot.queues.set(interaction.guild!.id, newQueue);\n      newQueue.songs.push(...playlist.videos);\n\n      newQueue.enqueue(playlist.videos[0]);\n    }\n\n    let playlistEmbed = new EmbedBuilder()\n      .setTitle(`${playlist.data.title}`)\n      .setDescription(playlist.videos.map((song: Song, index: number) => `${index + 1}. ${song.title}`).join(\"\\n\"))\n      .setURL(playlist.data.url!)\n      .setColor(\"#F8AA2A\")\n      .setTimestamp();\n\n    if (playlistEmbed.data.description!.length >= 2048)\n      playlistEmbed.setDescription(\n        playlistEmbed.data.description!.substr(0, 2007) + i18n.__(\"playlist.playlistCharLimit\")\n      );\n\n    if (interaction.replied)\n      return interaction.editReply({\n        content: i18n.__mf(\"playlist.startedPlaylist\", { author: interaction.user.id }),\n        embeds: [playlistEmbed]\n      });\n    interaction\n      .reply({\n        content: i18n.__mf(\"playlist.startedPlaylist\", { author: interaction.user.id }),\n        embeds: [playlistEmbed]\n      })\n      .catch(console.error);\n  }\n};\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAA+D;AAC/D,qBAMO;AACP,eAAoB;AACpB,wBAA2B;AAC3B,sBAAyB;AAEzB,kBAAqB;AAErB,IAAO,mBAAQ;AAAA,EACb,MAAM,IAAI,mCAAoB,EAC3B,QAAQ,UAAU,EAClB,eAAe,iBAAK,GAAG,sBAAsB,CAAC,EAC9C,gBAAgB,CAAC,WAAW,OAAO,QAAQ,UAAU,EAAE,eAAe,uBAAuB,EAAE,YAAY,IAAI,CAAC;AAAA,EACnH,UAAU;AAAA,EACV,aAAa;AAAA,IACX,mCAAoB,MAAM;AAAA,IAC1B,mCAAoB,MAAM;AAAA,IAC1B,mCAAoB,MAAM;AAAA,IAC1B,mCAAoB,MAAM;AAAA,EAC5B;AAAA,EACA,MAAM,QAAQ,aAA0C;AACtD,QAAI,cAAc,YAAY,QAAQ,UAAU,UAAU;AAE1D,UAAM,aAAa,YAAY,MAAO,QAAQ,MAAM,IAAI,YAAY,KAAK,EAAE;AAC3E,UAAM,EAAE,QAAQ,IAAI,WAAY;AAEhC,UAAM,QAAQ,aAAI,OAAO,IAAI,YAAY,MAAO,EAAE;AAElD,QAAI,CAAC;AACH,aAAO,YAAY,MAAM,EAAE,SAAS,iBAAK,GAAG,0BAA0B,GAAG,WAAW,KAAK,CAAC,EAAE,MAAM,QAAQ,KAAK;AAEjH,QAAI,SAAS,QAAQ,OAAO,MAAM,WAAW,WAAW;AACtD,UAAI,YAAY;AACd,eAAO,YACJ,UAAU,EAAE,SAAS,iBAAK,KAAK,8BAA8B,EAAE,MAAM,YAAY,OAAO,KAAM,SAAS,CAAC,EAAE,CAAC,EAC3G,MAAM,QAAQ,KAAK;AAAA;AAEtB,eAAO,YACJ,MAAM;AAAA,UACL,SAAS,iBAAK,KAAK,8BAA8B,EAAE,MAAM,YAAY,OAAO,KAAM,SAAS,CAAC;AAAA,UAC5F,WAAW;AAAA,QACb,CAAC,EACA,MAAM,QAAQ,KAAK;AAE1B,QAAI;AAEJ,QAAI;AACF,iBAAW,MAAM,yBAAS,KAAK,YAAa,MAAM,GAAG,EAAE,IAAI,WAAY;AAAA,IACzE,SAAS,OAAP;AACA,cAAQ,MAAM,KAAK;AAEnB,UAAI,YAAY;AACd,eAAO,YAAY,UAAU,EAAE,SAAS,iBAAK,GAAG,gCAAgC,EAAE,CAAC,EAAE,MAAM,QAAQ,KAAK;AAAA;AAExG,eAAO,YACJ,MAAM,EAAE,SAAS,iBAAK,GAAG,gCAAgC,GAAG,WAAW,KAAK,CAAC,EAC7E,MAAM,QAAQ,KAAK;AAAA,IAC1B;AAEA,QAAI,OAAO;AACT,YAAM,MAAM,KAAK,GAAG,SAAS,MAAM;AAAA,IACrC,OAAO;AACL,YAAM,WAAW,IAAI,6BAAW;AAAA,QAC9B;AAAA,QACA,aAAa,YAAY;AAAA,QACzB,gBAAY,+BAAiB;AAAA,UAC3B,WAAW,QAAQ;AAAA,UACnB,SAAS,QAAQ,MAAM;AAAA,UACvB,gBAAgB,QAAQ,MAAM;AAAA,QAChC,CAAC;AAAA,MACH,CAAC;AAED,mBAAI,OAAO,IAAI,YAAY,MAAO,IAAI,QAAQ;AAC9C,eAAS,MAAM,KAAK,GAAG,SAAS,MAAM;AAEtC,eAAS,QAAQ,SAAS,OAAO,EAAE;AAAA,IACrC;AAEA,QAAI,gBAAgB,IAAI,4BAAa,EAClC,SAAS,GAAG,SAAS,KAAK,OAAO,EACjC,eAAe,SAAS,OAAO,IAAI,CAAC,MAAY,UAAkB,GAAG,QAAQ,MAAM,KAAK,OAAO,EAAE,KAAK,IAAI,CAAC,EAC3G,OAAO,SAAS,KAAK,GAAI,EACzB,SAAS,SAAS,EAClB,aAAa;AAEhB,QAAI,cAAc,KAAK,YAAa,UAAU;AAC5C,oBAAc;AAAA,QACZ,cAAc,KAAK,YAAa,OAAO,GAAG,IAAI,IAAI,iBAAK,GAAG,4BAA4B;AAAA,MACxF;AAEF,QAAI,YAAY;AACd,aAAO,YAAY,UAAU;AAAA,QAC3B,SAAS,iBAAK,KAAK,4BAA4B,EAAE,QAAQ,YAAY,KAAK,GAAG,CAAC;AAAA,QAC9E,QAAQ,CAAC,aAAa;AAAA,MACxB,CAAC;AACH,gBACG,MAAM;AAAA,MACL,SAAS,iBAAK,KAAK,4BAA4B,EAAE,QAAQ,YAAY,KAAK,GAAG,CAAC;AAAA,MAC9E,QAAQ,CAAC,aAAa;AAAA,IACxB,CAAC,EACA,MAAM,QAAQ,KAAK;AAAA,EACxB;AACF;",
  "names": []
}
