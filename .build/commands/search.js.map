{
  "version": 3,
  "sources": ["../../commands/search.ts"],
  "sourcesContent": ["import {\n  ActionRowBuilder,\n  ChatInputCommandInteraction,\n  SlashCommandBuilder,\n  StringSelectMenuBuilder,\n  StringSelectMenuInteraction\n} from \"discord.js\";\nimport youtube, { Video } from \"youtube-sr\";\nimport { bot } from \"..\";\nimport { i18n } from \"../utils/i18n\";\n\nexport default {\n  data: new SlashCommandBuilder()\n    .setName(\"search\")\n    .setDescription(i18n.__(\"search.description\"))\n    .addStringOption((option) =>\n      option.setName(\"query\").setDescription(i18n.__(\"search.optionQuery\")).setRequired(true)\n    ),\n  async execute(interaction: ChatInputCommandInteraction) {\n    const query = interaction.options.getString(\"query\", true);\n    const member = interaction.guild!.members.cache.get(interaction.user.id);\n\n    if (!member?.voice.channel)\n      return interaction.reply({ content: i18n.__(\"search.errorNotChannel\"), ephemeral: true }).catch(console.error);\n\n    const search = query;\n\n    await interaction.reply(\"\u23F3 Loading...\").catch(console.error);\n\n    let results: Video[] = [];\n\n    try {\n      results = await youtube.search(search, { limit: 10, type: \"video\" });\n    } catch (error: any) {\n      console.error(error);\n\n      interaction.editReply({ content: i18n.__(\"common.errorCommand\") }).catch(console.error);\n    }\n\n    if (!results) return;\n\n    const options = results!.map((video) => {\n      return {\n        label: video.title ?? \"\",\n        value: video.url\n      };\n    });\n\n    const row = new ActionRowBuilder<StringSelectMenuBuilder>().addComponents(\n      new StringSelectMenuBuilder()\n        .setCustomId(\"search-select\")\n        .setPlaceholder(\"Nothing selected\")\n        .setMinValues(1)\n        .setMaxValues(10)\n        .addOptions(options)\n    );\n\n    const followUp = await interaction.followUp({\n      content: \"Choose songs to play\",\n      components: [row]\n    });\n\n    followUp\n      .awaitMessageComponent({\n        time: 30000\n      })\n      .then((selectInteraction) => {\n        if (!(selectInteraction instanceof StringSelectMenuInteraction)) return;\n\n        selectInteraction.update({ content: \"\u23F3 Loading the selected songs...\", components: [] });\n\n        bot.slashCommandsMap\n          .get(\"play\")!\n          .execute(interaction, selectInteraction.values[0])\n          .then(() => {\n            selectInteraction.values.slice(1).forEach((url) => {\n              bot.slashCommandsMap.get(\"play\")!.execute(interaction, url);\n            });\n          });\n      })\n      .catch(console.error);\n  }\n};\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAMO;AACP,wBAA+B;AAC/B,eAAoB;AACpB,kBAAqB;AAErB,IAAO,iBAAQ;AAAA,EACb,MAAM,IAAI,mCAAoB,EAC3B,QAAQ,QAAQ,EAChB,eAAe,iBAAK,GAAG,oBAAoB,CAAC,EAC5C;AAAA,IAAgB,CAAC,WAChB,OAAO,QAAQ,OAAO,EAAE,eAAe,iBAAK,GAAG,oBAAoB,CAAC,EAAE,YAAY,IAAI;AAAA,EACxF;AAAA,EACF,MAAM,QAAQ,aAA0C;AACtD,UAAM,QAAQ,YAAY,QAAQ,UAAU,SAAS,IAAI;AACzD,UAAM,SAAS,YAAY,MAAO,QAAQ,MAAM,IAAI,YAAY,KAAK,EAAE;AAEvE,QAAI,EAAC,iCAAQ,MAAM;AACjB,aAAO,YAAY,MAAM,EAAE,SAAS,iBAAK,GAAG,wBAAwB,GAAG,WAAW,KAAK,CAAC,EAAE,MAAM,QAAQ,KAAK;AAE/G,UAAM,SAAS;AAEf,UAAM,YAAY,MAAM,mBAAc,EAAE,MAAM,QAAQ,KAAK;AAE3D,QAAI,UAAmB,CAAC;AAExB,QAAI;AACF,gBAAU,MAAM,kBAAAA,QAAQ,OAAO,QAAQ,EAAE,OAAO,IAAI,MAAM,QAAQ,CAAC;AAAA,IACrE,SAAS,OAAP;AACA,cAAQ,MAAM,KAAK;AAEnB,kBAAY,UAAU,EAAE,SAAS,iBAAK,GAAG,qBAAqB,EAAE,CAAC,EAAE,MAAM,QAAQ,KAAK;AAAA,IACxF;AAEA,QAAI,CAAC;AAAS;AAEd,UAAM,UAAU,QAAS,IAAI,CAAC,UAAU;AACtC,aAAO;AAAA,QACL,OAAO,MAAM,SAAS;AAAA,QACtB,OAAO,MAAM;AAAA,MACf;AAAA,IACF,CAAC;AAED,UAAM,MAAM,IAAI,gCAA0C,EAAE;AAAA,MAC1D,IAAI,uCAAwB,EACzB,YAAY,eAAe,EAC3B,eAAe,kBAAkB,EACjC,aAAa,CAAC,EACd,aAAa,EAAE,EACf,WAAW,OAAO;AAAA,IACvB;AAEA,UAAM,WAAW,MAAM,YAAY,SAAS;AAAA,MAC1C,SAAS;AAAA,MACT,YAAY,CAAC,GAAG;AAAA,IAClB,CAAC;AAED,aACG,sBAAsB;AAAA,MACrB,MAAM;AAAA,IACR,CAAC,EACA,KAAK,CAAC,sBAAsB;AAC3B,UAAI,EAAE,6BAA6B;AAA8B;AAEjE,wBAAkB,OAAO,EAAE,SAAS,wCAAmC,YAAY,CAAC,EAAE,CAAC;AAEvF,mBAAI,iBACD,IAAI,MAAM,EACV,QAAQ,aAAa,kBAAkB,OAAO,EAAE,EAChD,KAAK,MAAM;AACV,0BAAkB,OAAO,MAAM,CAAC,EAAE,QAAQ,CAAC,QAAQ;AACjD,uBAAI,iBAAiB,IAAI,MAAM,EAAG,QAAQ,aAAa,GAAG;AAAA,QAC5D,CAAC;AAAA,MACH,CAAC;AAAA,IACL,CAAC,EACA,MAAM,QAAQ,KAAK;AAAA,EACxB;AACF;",
  "names": ["youtube"]
}
